<html>
    <head>
        <meta charset="utf-8">
        <link rel="icon" href="favicon.png" type="image/png">

        <title>ADIP</title>

        <link rel="stylesheet" href="css/style.css">
    </head>
    <body>
        <div style="height:100%;width:100%;display:flex;flex-direction: column;align-items: center;">
            <span id="opencv-info">openCV.js 還沒準備好</span>
            <div id="image-editor-canvas-div" style="position: relative; max-height: 90%;max-width:90%;">
                <canvas id="image-editor-canvas" style="max-height: 100%;max-width:100%;"></canvas>
                <canvas id="image-editor-mask-canvas" style="position: absolute;top: 0;left: 0;max-height: 100%;max-width:100%;"></canvas>
            </div>
            <div>
                <div id="GrabCut-mode" style="display:none;">
                    <button onclick="
                            image_editing_data.grabCutFirst=false;
                            const ctx=image_editor_mask_canvas.getContext('2d');
                            ctx.clearRect(0, 0, image_editor_mask_canvas.width, image_editor_mask_canvas.height);
                            opencv_info.innerHTML='選擇一個區塊來計算物件';
                        ">重製遮罩</button>
                    <button onclick="
                            image_editing_data.grabCutAdd=1;
                            opencv_info.innerHTML='標記想要添加的部分';
                        ">添加區域</button>
                    <button onclick="
                            image_editing_data.grabCutAdd=2;
                            opencv_info.innerHTML='標記想要移除的部分';
                        ">去除區域</button>
                    <button onclick="saveGrabCut();">儲存影像</button>
                </div>
            </div>
            <div style="margin-bottom: 25px;">
                <button onclick="setEditImage(null, 'NOPE');">清除圖像</button>
            </div>
            
            <div>
                <input id="image-input" type="file" accept="image/*" multiple disabled>
                <button onclick="loadExample();">Load Example</button>
            </div>
            <div id="preview-image" style="width:100%;display:flex;flex-wrap: wrap;justify-content: center;align-content: flex-start;background:#f0f0f0;">
            </div>
        </div>

        <script src="js/image_editor.js"></script>
        <script src="js/main.js"></script>
        <script async src="js/opencv.js" onload="openCVReady();"></script>
    </body>
</html>